<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1025px" preserveAspectRatio="none" style="width:858px;height:1025px;background:#FFFFFF;" version="1.1" viewBox="0 0 858 1025" width="858px" zoomAndPan="magnify"><defs/><g><rect height="42.5938" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="322" x="265.25" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="141" x="355.75" y="27.9951">GitLab K8s Agent</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="312" x="270.25" y="44.292">CI/CD Workflow (Tunnel) Configuration</text><rect fill="#90EE90" height="829.3047" style="stroke:#000000;stroke-width:0.5;" width="130" x="1" y="59.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="124" x="4" y="71.6606">Runner Network</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="96" x="4" y="86.7935">Environment</text><rect fill="#FFA500" height="829.3047" style="stroke:#000000;stroke-width:0.5;" width="264" x="261" y="59.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="119" x="309.5" y="71.6606">GitLab Instance</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="149" x="309.5" y="86.7935">or GitLab.com SaaS</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="167" x="309.5" y="101.9263">Network Environment</text><rect fill="#ADD8E6" height="829.3047" style="stroke:#000000;stroke-width:0.5;" width="173" x="679.5" y="59.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="87" x="682.5" y="71.6606">Kubernetes</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="167" x="682.5" y="86.7935">Network Environment</text><rect height="647.7188" style="stroke:#000000;stroke-width:1.5;fill:none;" width="818" x="13.5" y="173.5859"/><rect height="194.1953" style="stroke:#000000;stroke-width:1.5;fill:none;" width="566.5" x="255" y="197.7188"/><rect height="194.1953" style="stroke:#000000;stroke-width:1.5;fill:none;" width="507.5" x="23.5" y="405.9141"/><rect height="200.1953" style="stroke:#000000;stroke-width:1.5;fill:none;" width="798" x="23.5" y="614.1094"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="65.5" x2="65.5" y1="156.5859" y2="838.3047"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="196" x2="196" y1="156.5859" y2="838.3047"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="317" x2="317" y1="156.5859" y2="838.3047"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="471" x2="471" y1="156.5859" y2="838.3047"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="590" x2="590" y1="156.5859" y2="838.3047"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="765.5" x2="765.5" y1="156.5859" y2="838.3047"/><rect fill="#008000" height="30.2969" rx="2.5" ry="2.5" style="stroke:#FFFFFF;stroke-width:0.5;" width="65" x="33.5" y="125.2891"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="40.5" y="145.2842">Runner</text><rect fill="#008000" height="30.2969" rx="2.5" ry="2.5" style="stroke:#FFFFFF;stroke-width:0.5;" width="65" x="33.5" y="837.3047"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="40.5" y="857.2998">Runner</text><rect fill="#FFFFFF" height="46.5938" rx="2.5" ry="2.5" style="stroke:#FFFFFF;stroke-width:0.5;" width="118" x="137" y="108.9922"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="150" y="128.9873">Any Network</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="144" y="145.2842">(Incl. Internet)</text><rect fill="#FFFFFF" height="46.5938" rx="2.5" ry="2.5" style="stroke:#FFFFFF;stroke-width:0.5;" width="118" x="137" y="837.3047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="150" y="857.2998">Any Network</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="144" y="873.5967">(Incl. Internet)</text><rect fill="#FF4500" height="46.5938" rx="2.5" ry="2.5" style="stroke:#FFFFFF;stroke-width:0.5;" width="104" x="265" y="108.9922"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="293" y="128.9873">GitLab</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="272" y="145.2842">Rails Service</text><rect fill="#FF4500" height="46.5938" rx="2.5" ry="2.5" style="stroke:#FFFFFF;stroke-width:0.5;" width="104" x="265" y="837.3047"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="293" y="857.2998">GitLab</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="272" y="873.5967">Rails Service</text><rect fill="#FF4500" height="46.5938" rx="2.5" ry="2.5" style="stroke:#FFFFFF;stroke-width:0.5;" width="100" x="421" y="108.9922"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="447" y="128.9873">GitLab</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="428" y="145.2842">KAS Service</text><rect fill="#FF4500" height="46.5938" rx="2.5" ry="2.5" style="stroke:#FFFFFF;stroke-width:0.5;" width="100" x="421" y="837.3047"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="447" y="857.2998">GitLab</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="428" y="873.5967">KAS Service</text><rect fill="#FFFFFF" height="46.5938" rx="2.5" ry="2.5" style="stroke:#FFFFFF;stroke-width:0.5;" width="118" x="531" y="108.9922"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="540" y="128.9873">Any Network2</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="538" y="145.2842">(Incl. Internet)</text><rect fill="#FFFFFF" height="46.5938" rx="2.5" ry="2.5" style="stroke:#FFFFFF;stroke-width:0.5;" width="118" x="531" y="837.3047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="540" y="857.2998">Any Network2</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="538" y="873.5967">(Incl. Internet)</text><rect fill="#0000FF" height="46.5938" rx="2.5" ry="2.5" style="stroke:#FFFFFF;stroke-width:0.5;" width="91" x="720.5" y="108.9922"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="727.5" y="128.9873">GitLab K8s</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="744" y="145.2842">Agent</text><rect fill="#0000FF" height="46.5938" rx="2.5" ry="2.5" style="stroke:#FFFFFF;stroke-width:0.5;" width="91" x="720.5" y="837.3047"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="727.5" y="857.2998">GitLab K8s</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="744" y="873.5967">Agent</text><path d="M13.5,173.5859 L331.5,173.5859 L331.5,180.7188 L321.5,190.7188 L13.5,190.7188 L13.5,173.5859 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="647.7188" style="stroke:#000000;stroke-width:1.5;" width="818" x="13.5" y="173.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="273" x="28.5" y="186.6528">GitLab Secure App Control Channels</text><path d="M255,197.7188 L495,197.7188 L495,204.8516 L485,214.8516 L255,214.8516 L255,197.7188 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="194.1953" style="stroke:#000000;stroke-width:1.5;" width="566.5" x="255" y="197.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="195" x="270" y="210.7856">GitLab K8s Agent Channel</text><polygon fill="#181818" points="482,247.1172,472,251.1172,482,251.1172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="471" x2="765" y1="251.1172" y2="251.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="488" y="230.9185">(K1) Initiates SSL Tunnel to 443 on</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="234" x="488" y="246.0513">KAS dedicated subdomain [Network]</text><polygon fill="#181818" points="482,296.3828,472,296.3828,482,300.3828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="471" x2="765" y1="295.3828" y2="295.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="488" y="275.1841">(K2) Registered K8s</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="488" y="290.3169">Agent Token [Auth]</text><polygon fill="#181818" points="328,340.6484,318,340.6484,328,344.6484" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="317" x2="470" y1="339.6484" y2="339.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="334" y="319.4497">(K3) Registered K8s</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="334" y="334.5825">Agent Token [Auth]</text><ellipse cx="470.5" cy="383.1641" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><ellipse cx="765.5" cy="383.1641" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="748.5,379.9141,758.5,383.9141,748.5,387.9141,752.5,383.9141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="475" x2="754.5" y1="383.9141" y2="383.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="478" y="363.7153">(G1) GitOps Manifest Polling</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="478" y="378.8481">(when used) [Control]</text><path d="M23.5,405.9141 L185.5,405.9141 L185.5,413.0469 L175.5,423.0469 L23.5,423.0469 L23.5,405.9141 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="194.1953" style="stroke:#000000;stroke-width:1.5;" width="507.5" x="23.5" y="405.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="117" x="38.5" y="418.981">Runner Channel</text><polygon fill="#181818" points="305,455.3125,315,459.3125,305,459.3125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="66" x2="316" y1="459.3125" y2="459.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158" x="73" y="439.1138">(R1) Runner Initiates SSL</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="73" y="454.2466">Tunnel to 443 [Network]</text><polygon fill="#181818" points="305,504.5781,315,504.5781,305,508.5781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="66" x2="316" y1="503.5781" y2="503.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="73" y="483.3794">(R2) Registered Runner</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="73" y="498.5122">Token [Auth]</text><ellipse cx="65.5" cy="547.0938" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="82.5,543.8438,72.5,547.8438,82.5,551.8438,78.5,547.8438" style="stroke:#181818;stroke-width:1.0;"/><ellipse cx="316.5" cy="547.0938" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><line style="stroke:#181818;stroke-width:1.0;" x1="80.5" x2="312" y1="547.8438" y2="547.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="83" y="527.645">(R3) Runner Job (via Runner</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="83" y="542.7778">Polling) [Control]</text><polygon fill="#181818" points="459,588.1094,469,592.1094,459,592.1094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="66" x2="470" y1="592.1094" y2="592.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220" x="73" y="571.9106">(R4) Initiates SSL Tunnel to 443 on</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="234" x="73" y="587.0435">KAS dedicated subdomain [Network]</text><path d="M23.5,614.1094 L399.5,614.1094 L399.5,621.2422 L389.5,631.2422 L23.5,631.2422 L23.5,614.1094 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="200.1953" style="stroke:#000000;stroke-width:1.5;" width="798" x="23.5" y="614.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="331" x="38.5" y="627.1763">Secure CI/CD Control Tunnel to Kubernetes</text><path d="M476,636.2422 L476,676.2422 L726,676.2422 L726,646.2422 L716,636.2422 L476,636.2422 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M716,636.2422 L716,646.2422 L726,646.2422 L716,636.2422 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="482" y="653.3091">This Control Flow Uses The K and R</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195" x="482" y="668.4419">Flows Of The Channels Above.</text><ellipse cx="65.5" cy="717.0234" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="82.5,713.7734,72.5,717.7734,82.5,721.7734,78.5,717.7734" style="stroke:#181818;stroke-width:1.0;"/><ellipse cx="316.5" cy="717.0234" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><line style="stroke:#181818;stroke-width:1.0;" x1="80.5" x2="312" y1="717.7734" y2="717.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="83" y="697.5747">(CD1) Runner Job for</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="83" y="712.7075">K8s Agent [Control]</text><ellipse cx="65.5" cy="761.2891" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><ellipse cx="470.5" cy="761.2891" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="453.5,758.0391,463.5,762.0391,453.5,766.0391,457.5,762.0391" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="70" x2="459.5" y1="762.0391" y2="762.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="73" y="741.8403">(CD2) K8s Control Proxy</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="73" y="756.9731">Initiate [Control]</text><ellipse cx="470.5" cy="805.5547" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><ellipse cx="765.5" cy="805.5547" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="748.5,802.3047,758.5,806.3047,748.5,810.3047,752.5,806.3047" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="475" x2="754.5" y1="806.3047" y2="806.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="478" y="786.106">(CD4) K8s Control KAS Polled</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="478" y="801.2388">By Agent [Control]</text><rect height="128.0469" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="794" x="29.25" y="889.8984"/><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="3" x="424.75" y="899.1807"> </text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="3" x="424.75" y="910.8213"> </text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="576" x="138.25" y="922.4619">Each Network Environment must provided suitable network routing, DNS and firewall configuration to allow</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="560" x="146.25" y="934.1025">the connection initiation and return conversations indicated in the lines marked with "[Network]" boxes.</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="3" x="424.75" y="945.7432"> </text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="561" x="29.25" y="957.3838">The GitLab Instance, Runners and Kubernetes Agents may all be in the same network environment - the</text><text fill="#888888" font-family="sans-serif" font-size="10" font-weight="bold" lengthAdjust="spacing" textLength="116" x="593.25" y="957.3838">most complex case</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="108" x="712.25" y="957.3838">is depicted because</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="744" x="54.25" y="969.0244">it would be the norm if using GitLab.com SaaS with self-hosted runners to manage Kubernetes clusters in a variety of other environments.</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="3" x="424.75" y="980.665"> </text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="277" x="287.75" y="992.3057">All dark orange boxes are part of a GitLab Instance.</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="3" x="424.75" y="1003.9463"> </text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="480" x="186.25" y="1015.5869">Only the GitLab K8s integration is required for a pure GitOps workflow (depicted as "(G)").</text><!--MD5=[7af03bd5cb4b180757b647310d4a2907]
@startuml
skinparam shadowing false
skinparam sequenceBoxBorderColor #black
skinparam noteBorderColor #white
skinparam participantBorderColor #white
skinparam participantBackgroundColor #white

Title "GitLab K8s Agent\nCI/CD Workflow (Tunnel) Configuration"
box "Runner Network\nEnvironment" #LightGreen
 participant "<font color=white>Runner" as Runner #Green
end box
note right "Any Network\n(Incl. Internet)"
end note
box "GitLab Instance\nor GitLab.com SaaS\nNetwork Environment" #Orange
  participant "<font color=white>GitLab\nRails Service" as GitLabROR #OrangeRed
  participant "<font color=white>GitLab\nKAS Service" as GitLabKAS #OrangeRed
end box
note right "Any Network2\n(Incl. Internet)"
end note
box "Kubernetes\nNetwork Environment" #LightBlue
 participant "<font color=white>GitLab K8s\n<font color=white>Agent" as KubernetesAgent #Blue
end box

group GitLab Secure App Control Channels
  group GitLab K8s Agent Channel
    KubernetesAgent -\ GitLabKAS: (K1) Initiates SSL Tunnel to 443 on \nKAS dedicated subdomain [Network]
    KubernetesAgent -/ GitLabKAS: (K2) Registered K8s \nAgent Token [Auth]
    GitLabKAS -/ GitLabROR: (K3) Registered K8s \nAgent Token [Auth]
    GitLabKAS o->o KubernetesAgent: (G1) GitOps Manifest Polling \n(when used) [Control]
  end group
  group Runner Channel
    Runner -\ GitLabROR: (R1) Runner Initiates SSL \nTunnel to 443 [Network]
    Runner -/ GitLabROR: (R2) Registered Runner \nToken [Auth]
    Runner o<-o GitLabROR: (R3) Runner Job (via Runner \nPolling) [Control]
    Runner -\ GitLabKAS: (R4) Initiates SSL Tunnel to 443 on \nKAS dedicated subdomain [Network]
  end group
  group  Secure CI/CD Control Tunnel to Kubernetes
    note right of GitLabKAS: This Control Flow Uses The K and R \nFlows Of The Channels Above.
    GitLabROR o->o Runner: (CD1) Runner Job for \nK8s Agent [Control]
    Runner o->o GitLabKAS: (CD2) K8s Control Proxy \nInitiate [Control]
    GitLabKAS o->o KubernetesAgent: (CD4) K8s Control KAS Polled \nBy Agent [Control]
  end group
end group

center footer \n\nEach Network Environment must provided suitable network routing, DNS and firewall configuration to allow\nthe connection initiation and return conversations indicated in the lines marked with "[Network]" boxes.\n\nThe GitLab Instance, Runners and Kubernetes Agents may all be in the same network environment - the **most complex case** is depicted because \nit would be the norm if using GitLab.com SaaS with self-hosted runners to manage Kubernetes clusters in a variety of other environments.\n\nAll dark orange boxes are part of a GitLab Instance.\n\nOnly the GitLab K8s integration is required for a pure GitOps workflow (depicted as "(G)").
@enduml

PlantUML version 1.2022.3beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>